<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MASTER | NEON SYSTEM</title>
    <style>
        :root { 
            --user-color: #39ff14; /* Green */
            --owner-color: #00d2ff; /* Blue */
            --bg: #050505; 
        }
        body { background: var(--bg); color: #fff; font-family: 'Courier New', monospace; text-align: center; margin: 0; transition: 0.5s; }
        
        /* Dynamic Theme classes */
        .theme-user { --current: var(--user-color); color: var(--user-color); }
        .theme-owner { --current: var(--owner-color); color: var(--owner-color); }

        .container { 
            border: 2px solid var(--current); 
            box-shadow: 0 0 15px var(--current); 
            padding: 25px; margin: 50px auto; width: 85%; max-width: 500px; border-radius: 15px; 
        }

        input { 
            width: 80%; padding: 12px; margin: 10px 0; background: #000; 
            border: 1px solid var(--current); color: #fff; border-radius: 5px; 
        }

        .tab-btn { 
            background: transparent; border: 1px solid var(--current); color: var(--current);
            padding: 10px 20px; cursor: pointer; margin: 5px; border-radius: 5px;
        }
        .active-tab { background: var(--current) !important; color: #000 !important; }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .card { border: 1px solid #333; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; font-size: 12px; cursor: pointer; }
        .card:hover { border-color: var(--current); }

        #res { background: #000; border: 1px dashed var(--current); padding: 10px; margin-top: 15px; text-align: left; display: none; font-size: 11px; white-space: pre-wrap; }
        
        .log-item { border-bottom: 1px solid #222; padding: 8px; text-align: left; font-size: 10px; }
    </style>
</head>
<body class="theme-user">

    <div id="login-screen" class="container">
        <h2 id="login-title">SYSTEM AUTHORIZATION</h2>
        <input type="text" id="email" placeholder="Email / Username">
        <input type="password" id="pass" placeholder="Password">
        <br>
        <button class="tab-btn" onclick="handleLogin()">LOGIN</button>
    </div>

    <div id="dashboard" class="container" style="display:none;">
        <h2 id="greet-msg">Welcome to User</h2>
        <hr style="border:0.5px solid #333">
        
        <div id="owner-tabs" style="display:none; margin-bottom:15px;">
            <button id="t1" class="tab-btn active-tab" onclick="switchTab('tools')">üõ† TOOLS</button>
            <button id="t2" class="tab-btn" onclick="switchTab('logs')">üìÅ MASTER LOGS</button>
        </div>

        <div id="tools-view">
            <input type="text" id="target" placeholder="Target info...">
            <div class="grid">
                <div class="card" onclick="runAPI('mobile')">üì± MOBILE</div>
                <div class="card" onclick="runAPI('ip')">üåê IP TRACK</div>
                <div class="card" onclick="runAPI('upi')">üí∏ UPI</div>
                <div class="card" onclick="runAPI('insta')">üì∏ INSTA</div>
            </div>
            <div id="res"></div>
        </div>

        <div id="log-view" style="display:none;">
            <h3 style="margin-top:0;">LIVE ACTIVITY LOGS</h3>
            <div id="log-list">Fetching data...</div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

    <script>
        // Aapki extracted API Key
        const firebaseConfig = {
            apiKey: "AIzaSyAyyQVzk9Z0pMEzcc0iNHn-aOAn73-IZ-A",
            authDomain: "my-new-project-33f85.firebaseapp.com",
            projectId: "my-new-project-33f85",
            storageBucket: "my-new-project-33f85.firebasestorage.app",
            messagingSenderId: "1092014213129",
            appId: "1:1092014213129:web:29dd21e5beb542c1d590d8"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function handleLogin() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;
            const body = document.body;
            let role = "";

            if(email === "admin" && pass === "harsh@786") {
                role = "user";
            } else if(email === "harsh48227@gmail.com" && pass === "harsh@1234") {
                role = "owner";
            } else {
                return alert("Access Denied!");
            }

            // Get Device Info
            let battery = "Unknown";
            try { const b = await navigator.getBattery(); battery = (b.level * 100) + "%"; } catch(e){}
            
            let isp = "Detecting...";
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                isp = `${data.org} (${data.city})`;
            } catch(e){}

            // Log login to Firebase
            db.collection("system_logs").add({
                user: email,
                role: role,
                battery: battery,
                isp: isp,
                device: navigator.platform,
                time: new Date().toLocaleString()
            });

            // UI Changes
            document.getElementById('login-screen').style.display = "none";
            document.getElementById('dashboard').style.display = "block";

            if(role === "owner") {
                body.className = "theme-owner";
                document.getElementById('greet-msg').innerText = "Welcome Master, kaise ho aap?";
                document.getElementById('owner-tabs').style.display = "block";
                loadLogs();
            } else {
                document.getElementById('greet-msg').innerText = "Welcome " + email;
            }
        }

        function runAPI(type) {
            const val = document.getElementById('target').value;
            if(!val) return alert("Value bhariye!");
            
            const r = document.getElementById('res');
            r.style.display = "block";
            r.innerText = "[+] Tracking " + type + "...";

            // Log Search to Firebase
            db.collection("search_logs").add({
                searchedBy: document.getElementById('email').value,
                query: val,
                type: type,
                time: new Date().toLocaleString()
            });

            // Demo logic
            setTimeout(() => { r.innerText = `Result for ${val}: \nStatus: Found \nData: Restricted Access`; }, 1500);
        }

        function switchTab(t) {
            document.getElementById('tools-view').style.display = (t === 'tools' ? 'block' : 'none');
            document.getElementById('log-view').style.display = (t === 'logs' ? 'block' : 'none');
            document.getElementById('t1').classList.toggle('active-tab', t === 'tools');
            document.getElementById('t2').classList.toggle('active-tab', t === 'logs');
        }

        function loadLogs() {
            db.collection("system_logs").orderBy("time", "desc").limit(15).onSnapshot(snap => {
                let html = "";
                snap.forEach(doc => {
                    const d = doc.data();
                    html += `<div class="log-item">
                        <b>User:</b> ${d.user} | <b>Batt:</b> ${d.battery}<br>
                        <b>ISP:</b> ${d.isp} | <b>Device:</b> ${d.device}<br>
                        <small style="color:#666">${d.time}</small>
                    </div>`;
                });
                document.getElementById('log-list').innerHTML = html;
            });
        }
    </script>
</body>
</html>
